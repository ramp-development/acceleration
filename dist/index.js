"use strict";(()=>{var S=()=>{let o=window.location.href;[...document.querySelectorAll("[data-copy-url]")].forEach(t=>{t.addEventListener("click",()=>{navigator.clipboard.writeText(o)})})};var v=(o,e,t={})=>{let i=document.createElement(o);return Object.entries(t).forEach(([r,n])=>{if(r==="class"){i.classList.add(n);return}if(r==="dataset"){Object.entries(n).forEach(([s,a])=>{i.dataset[s]=a});return}if(r==="text"){i.textContent=n;return}if(r==="callback"){i.onload=n;return}i.setAttribute(r,n)}),e.appendChild(i),i};var w=()=>{v("script",document.head,{src:"https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js",callback:o});function o(){[...document.querySelectorAll(".splide")].forEach(t=>{let i=new Splide(t,{type:"loop",gap:"2.5rem",perPage:3,perMove:1,breakpoints:{991:{perPage:2,gap:"2.5rem"},767:{perPage:1,gap:"2.5rem"}}});i.mount(),document.addEventListener("refreshSplide",()=>{i.refresh()})})}};var y=(o,e=document)=>{let t=e.querySelector(o);return t!=null?t:void 0};var g=(o,e=document)=>{let t=e.querySelectorAll(o);return t.length?[...t]:[]};var L=()=>document.createComment("* placeholder * for element");var H=o=>fetch(o).then(e=>e.text()).then(e=>new DOMParser().parseFromString(e,"text/html"));var I=(o,e,t)=>{t=Math.max(0,Math.min(t,o.children.length)),t===o.children.length?o.appendChild(e):(o.insertBefore(e,o.children[t]),[...o.childNodes].indexOf(e)!==t&&o.insertBefore(e,o.children[t]))};var M=class{constructor(e){this.targetFor=[];this.showIn=[];this.hideIn=[];this.element=e,this.targetFor=this.parseDataAttribute("targetFor"),this.showIn=this.parseDataAttribute("showIn"),this.hideIn=this.parseDataAttribute("hideIn");let{priorityIn:t}=this.element.dataset;this.priorityIn=t!=null?t:null;let i=this.element.getAttribute("data-priority-order");this.priorityOrder=i?Number(i):null,this.isVisible=!0,this.placeholder=L(),this.clone=this.element.cloneNode(!0)}parseDataAttribute(e){let t=this.element.dataset[e];return t?t.split(", "):[]}showElement(){this.placeholder.replaceWith(this.element),this.isVisible=!0}hideElement(){this.element.replaceWith(this.placeholder),this.isVisible=!1}targetForMarket(e){H(e.link).then(t=>{this.targetFor.map(r=>{let n=t.querySelector(`[data-child-for="${r}"]`);return{parent:r,element:n}}).forEach(({parent:r,element:n})=>{let s=document.querySelector(`[data-target-for="${r}"]`);s&&n&&s.replaceChildren(n)})}).catch(t=>console.error(t))}showInMarket(e){if(this.showIn.includes("Global")&&!this.element.dataset.override)return;let t=this.showIn.includes(e);t&&!this.isVisible?this.showElement():!t&&this.isVisible&&this.hideElement()}hideInMarket(e){let t=this.hideIn.includes(e);t&&this.isVisible?this.hideElement():!t&&!this.isVisible&&this.showElement()}prioritiseInMarket(e){let t=this.priorityIn===e;if(t&&e!=="Global"){let{parentElement:i}=this.element;if(!i)return;this.isVisible&&this.hideElement(),this.priorityOrder?I(i,this.clone,this.priorityOrder-1):i.prepend(this.clone),this.isVisible=!1}else t||(this.clone.remove(),this.isVisible=!0,this.placeholder.replaceWith(this.element),this.showIn.length>0&&this.showInMarket(e),this.hideIn.length>0&&this.hideInMarket(e));document.dispatchEvent(new CustomEvent("refreshSplide"))}updateVisibilityForMarket(e){this.targetFor.length>0&&this.targetForMarket(e),this.showIn.length>0&&this.showInMarket(e.id),this.hideIn.length>0&&this.hideInMarket(e.id),this.priorityIn&&this.prioritiseInMarket(e.id)}};var A=o=>{let e=new URL(window.location.href);e.searchParams.set("market",o),history.pushState({},"",e.toString()),sessionStorage.setItem("market",o)};var x=(o,e)=>{e.forEach(t=>t.updateVisibilityForMarket(o))};var q=(o,e)=>{e.forEach(t=>{t.textContent=o})};var C=o=>{let t=new URLSearchParams(window.location.search).get("market"),i=t||sessionStorage.getItem("market");!i||!Array.from(o.options).some(n=>n.value===i)||(o.value=i,o.dispatchEvent(new Event("change")))};var D=()=>{let o="data-localise",e=g(`[${o}="switcher-icon"]`),t=g(`[${o}="switcher-market"]`),i=y(`[${o}="market-wrapper"]`),r=y(`[${o}="market-select"]`,i),n=y(`[${o}="market-list"]`);if(!r||!n)return;let s=g('[data-localise="market-link"]',n),a=g('[data-localise="market-icon"]',n),l=s.map((m,u)=>{var f,d,E,b;return{id:(f=m.textContent)!=null?f:"",link:m.href,langCodes:(b=(E=(d=m.dataset)==null?void 0:d.langCodes)==null?void 0:E.split(", "))!=null?b:[],icon:a[u]}}),h=g("[data-target-for], [data-show-in], [data-hide-in], [data-priority-in]").map(m=>new M(m)).reverse(),c=g('[data-localise="mirror-market"]');r.addEventListener("marketSelectReady",()=>{r.addEventListener("change",u=>{let{value:f}=u.target,d=l.find(E=>E.id===f);d&&(A(d.id),x(d,h),q(d.id,c),e.forEach((E,b)=>{E.src=d.icon.src,E.alt=d.icon.alt,t[b].textContent=d.id}))}),C(r);let m=l.find(u=>u.id===r.value);m===l[0]&&x(m,h)});let p=l.length;if(r.options.length===p){let m=new Event("marketSelectReady");r.dispatchEvent(m)}else new MutationObserver((u,f)=>{if(r.options.length===l.length){f.disconnect();let d=new Event("marketSelectReady");r.dispatchEvent(d)}}).observe(r,{childList:!0})};var V=()=>{};var F=()=>{window.fsAttributes=window.fsAttributes||[],window.fsAttributes.push(["cmsfilter",async r=>{let[n]=r,{listInstance:s}=n,[a]=s.items,l=a.element,h=await o();s.clearItems();let c=h.map(m=>e(m,l));await s.addItems(c);let p=n.form.querySelectorAll('[data-element="filter-list"]');for(let m of p){let u=m.querySelector('[data-element="filter"]');if(!u)return;let f=u.parentElement;if(!f)return;u.remove();let{property:d}=m.dataset;if(!d)return;let E=t(h,d);for(let b of E){let k=i(b,u);k&&f.append(k)}}n.storeFiltersData()}]);let o=async()=>{let r={emea:{api:"groupmemea_jobfeedapi_key",sc:"a1d19b3f3a21cdde1558794436300152",subsidiaryName:"Acceleration"},northAmerica:{api:"groupmnorthamerica_jobfeedapi_key",sc:"60497c5c1cfa4d58341ec4060be40b2f",subsidiaryName:"GroupM%20Nexus%20Acceleration"}},n=[];Object.values(r).forEach(a=>{n.push(`https://api.jobvite.com/api/v2/job?api=${a.api}&sc=${a.sc}&subsidiaryName=${a.subsidiaryName}`)});let s=n.map(a=>fetch(a));return Promise.all(s).then(a=>Promise.all(a.map(l=>l.json()))).then(a=>a.reduce((c,p)=>c.concat(p.requisitions),[]).filter(c=>c.distribution&&c.postingType==="External")).catch(a=>{console.error(a)})},e=(r,n)=>{let s=n.cloneNode(!0),a=s.querySelector('[data-job="title"]'),l=s.querySelector('[data-job="description"]'),h=s.querySelector('[data-job="country"]'),c=s.querySelector('[data-job="department"]'),p=s.querySelector('[data-job="apply"]');return a&&(a.textContent=r.title),l&&(l.textContent=r.briefDescription),h&&(h.textContent=r.location),c&&(c.textContent=r.category),p&&(p.href=r.detailLink),s},t=(r,n)=>{let s=new Set;for(let a of r)s.add(a[n]);return[...s]},i=(r,n)=>{let s=n.cloneNode(!0),a=s.querySelector("span"),l=s.querySelector("input");if(!(!a||!l))return a.textContent=r,l.value=r,s}};var T=(o,e)=>(Array.isArray(e)||(e=[e]),e.map(i=>o.dispatchEvent(new Event(i,{bubbles:!0}))).every(i=>i));var j=()=>{let o=[...document.querySelectorAll("[data-modal-button]")],e=[...document.querySelectorAll("[data-modal-trigger]")];[...document.querySelectorAll(".splide__arrows")].forEach(n=>{n.addEventListener("click",()=>{o=[...document.querySelectorAll("[data-modal-button]")],i()})});let i=()=>{o.forEach(n=>{n.removeEventListener("click",r),n.addEventListener("click",r)})},r=n=>{let a=n.currentTarget.dataset.modalButton,l=e.find(h=>h.dataset.modalTrigger===a);T(l,"click")};i()};var O=()=>{F(),j()};var P=()=>{Array.from(document.querySelectorAll('[data-filter="dropdown"]')).forEach(e=>{let t=e.querySelector('[data-filter-toggle="text"]'),i=e.querySelector('[data-filter-toggle="select"]'),r=e.querySelector('[data-filter-toggle="selected"]'),n=e.querySelector('[data-filter-toggle="additional"]'),s=[t,i,r,n];Array.from(e.querySelectorAll("input")).forEach(l=>{l.addEventListener("change",()=>{s.forEach(p=>{p&&(p.style.display="none")});let c=Array.from(e.querySelectorAll("input:checked")).map(p=>p.dataset.inputName).filter(Boolean);c.length===0?t&&(t.style.display="block"):c.length===1?r&&(r.textContent=c[0],r.style.display="inline"):c.length>1&&(r&&(r.textContent=`${c[0]}, `,r.style.display="inline"),n&&(n.textContent=`+${c.length-1}`,n.style.display="inline"))})})})};var N=()=>{let o=document.querySelector('[fs-cmsfilter-element="filters"]');if(!o)return;Array.from(o.querySelectorAll("input")).forEach(t=>{let i=t.dataset.inputName;if(!i)return;let r=i.toLowerCase().replace(/\s+/g,"-");t.name=i,t.id=r;let n=t.nextElementSibling;n&&n.setAttribute("for",t.id)})};var $=(o,e,t)=>{let i=new Date,r;switch(t){case"minutes":r=e*60*1e3;break;case"hours":r=e*60*60*1e3;break;case"days":r=e*24*60*60*1e3;break;case"months":r=e*30*24*60*60*1e3;break;case"years":r=e*365*24*60*60*1e3;break;default:throw new Error("Invalid time unit")}return i.getTime()-o.getTime()<=r};var R=o=>new Date(o);var J=()=>{let o="data-localise";g(`[${o}="resource"]`).filter(i=>{let r=y(`[${o}="resource-date"]`,i);if(!(r!=null&&r.textContent))return;let n=R(r.textContent);return!$(n,1,"years")}).forEach(i=>{i.removeAttribute("data-priority-in")})};var W=()=>{N(),P(),J()};var U=()=>{let o=0;v("script",document.head,{src:"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js",defer:!0,callback:i}),v("script",document.head,{src:"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js",defer:!0,callback:i});let e=document.querySelector('[data-sticky="vertical-center"]'),t=`${(window.innerHeight-e.offsetHeight)/2}px`;e.style.top=t;function i(){if(o+=1,o!==2)return;gsap.registerPlugin(ScrollTrigger);let r=document.querySelector(".capabilities_header"),n=[...document.querySelectorAll(".capabilities_list-item")],s=[...document.querySelectorAll(".capabilities_illustration")];gsap.matchMedia().add("(min-width: 768px)",()=>{n.forEach((l,h)=>{let c=gsap.timeline({scrollTrigger:{trigger:l,start:"top 50%",end:"bottom 50%",scrub:1}}),p=s.find(m=>m.classList.contains(`is-${h+1}`));c.to(p,{opacity:1,duration:1})})})}};var _=()=>{let{pathname:o}=window.location;switch(o){case"/about-us":V();break;case"/services":U();break;case"/resources":W();break;case"/careers":O();break}};window.Webflow||(window.Webflow=[]);window.Webflow.push(()=>{_(),D(),document.querySelector(".splide")&&w(),document.querySelector("[data-copy-url]")&&S()});})();
