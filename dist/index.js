"use strict";(()=>{var k=()=>{let e=window.location.href;[...document.querySelectorAll("[data-copy-url]")].forEach(r=>{r.addEventListener("click",()=>{navigator.clipboard.writeText(e)})})};var L=(e,s,r={})=>{let t=document.createElement(e);return Object.entries(r).forEach(([l,n])=>{if(l==="class"){t.classList.add(n);return}if(l==="dataset"){Object.entries(n).forEach(([o,a])=>{t.dataset[o]=a});return}if(l==="text"){t.textContent=n;return}if(l==="callback"){t.onload=n;return}t.setAttribute(l,n)}),s.appendChild(t),t};var H=()=>{L("script",document.head,{src:"https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js",callback:e});function e(){[...document.querySelectorAll(".splide")].forEach(r=>{new Splide(r,{type:"loop",gap:"2.5rem",perPage:3,perMove:1,breakpoints:{991:{perPage:2,gap:"2.5rem"},767:{perPage:1,gap:"2.5rem"}}}).mount()})}};var q=()=>{let e=document.querySelector('[data-localise="language"]');if(!e){console.log("Language dropdown not found");return}[{code:Weglot.options.language_from,name:Weglot.getLanguageName(Weglot.options.language_from)},...Weglot.options.languages.map(r=>({code:r.language_to,name:Weglot.getLanguageName(r.language_to)}))].forEach(r=>{let t=document.createElement("option");t.value=r.code,t.text=r.name,e.appendChild(t)}),e.addEventListener("change",r=>{let t=r.target;Weglot.switchTo(t.value)}),Weglot.on("languageChanged",r=>{e.value=r})};var C=e=>{let r=new URLSearchParams(window.location.search).get("market"),t=r||sessionStorage.getItem("market");!t||!Array.from(e.options).some(n=>n.value===t)||(e.value=t,e.dispatchEvent(new Event("change")))};var E=(e,s=document)=>{let r=s.querySelectorAll(e);return r.length?[...r]:[]};var A=(e,s)=>{s.forEach(r=>{r.value=e,r.dispatchEvent(new Event("change"))}),window.scrollBy(0,1),window.scrollBy(0,-1)};var j=e=>{let s=new URL(window.location.href);s.searchParams.set("market",e),history.pushState({},"",s.toString()),sessionStorage.setItem("market",e)};var b=(e,s)=>document.createComment(`Placeholder for element for market: ${s}`);var c={showElementsMap:{},hideElementsMap:{},priorityElementsMap:{}};var D=(e,s,r)=>{r=Math.max(0,Math.min(r,e.children.length)),r===e.children.length?e.appendChild(s):(e.insertBefore(s,e.children[r]),[...e.childNodes].indexOf(s)!==r&&e.insertBefore(s,e.children[r]))};var S=(e,s)=>{s.forEach(r=>{let{priorityIn:t}=r.dataset;if(t)if(t===e){let{priorityOrder:l}=r.dataset,n=r.parentElement;if(!l||!n)return;let o=b(r,t),a=r.cloneNode(!0);r.replaceWith(o),D(n,r,Number(l)-1),c.priorityElementsMap[t]||(c.priorityElementsMap[t]=[]),c.priorityElementsMap[t].push({placeholder:o,element:r,clone:a})}else t!==e&&c.priorityElementsMap[t]&&(c.priorityElementsMap[t].forEach(({placeholder:l,element:n})=>l.replaceWith(n)),delete c.priorityElementsMap[t])})};var P=e=>fetch(e).then(s=>s.text()).then(s=>new DOMParser().parseFromString(s,"text/html"));var I=(e,s)=>{let r=s.map(t=>t.dataset.targetFor);P(e.link).then(t=>{r.map(n=>{let o=t.querySelector(`[data-child-for="${n}"]`);return{parent:n,element:o}}).forEach(({parent:n,element:o})=>{let a=document.querySelector(`[data-target-for="${n}"]`);a&&o&&a.replaceChildren(o)})}).catch(t=>console.error(t))};var v=(e,s)=>{s.forEach(r=>{var l,n;let t=(n=(l=r.dataset.hideIn)==null?void 0:l.split(","))!=null?n:[];t.length&&t.forEach(o=>{if(o!=="")if(o===e){let a=b(r,e);r.replaceWith(a),c.hideElementsMap[o]||(c.hideElementsMap[o]=[]),c.hideElementsMap[o].push({placeholder:a,element:r})}else o!==e&&c.hideElementsMap[o]&&(c.hideElementsMap[o].forEach(({placeholder:a,element:i})=>a.replaceWith(i)),delete c.hideElementsMap[e])})})};var T=(e,s)=>{s.forEach(r=>{var l,n;let t=(n=(l=r.dataset.showIn)==null?void 0:l.split(","))!=null?n:[];t.length&&t.forEach(o=>{if(o!=="Global"){if(o===e&&c.showElementsMap[e])c.showElementsMap[e].forEach(({placeholder:a,element:i})=>a.replaceWith(i)),delete c.showElementsMap[e];else if(o!==e&&!c.showElementsMap[o]){let a=b(r,e);r.replaceWith(a),c.showElementsMap[o]||(c.showElementsMap[o]=[]),c.showElementsMap[o].push({placeholder:a,element:r})}}})})};var N=()=>{let e=document.querySelector('[data-localise="market-select"]'),s=document.querySelector('[data-localise="market-list"]'),r=document.querySelector('[data-localise="selector-language"]'),t=E('[data-localise="selector-icon"]');if(!e||!s||!r||!t.length)return;let l=E('[data-localise="market-link"]',s),n=E('[data-localise="market-icon"]',s),o=l.filter(u=>!!u.textContent).map((u,y)=>({id:u.textContent,link:u.href,icon:n[y]})),a=E("[data-target-for]"),i=E("[data-show-in]"),m=E("[data-hide-in]"),p=E("[data-priority-in][data-priority-order]"),h=E('[data-localise="linked-select"]'),d={targetElements:a,showInElements:i,priorityInElements:p,hideInElements:m,linkedSelects:h};e.addEventListener("marketSelectReady",()=>{e.addEventListener("change",y=>{let{value:x}=y.target,g=o.find(M=>M.id===x);g&&(j(g.id),I(g,d.targetElements),T(g.id,d.showInElements),v(g.id,d.hideInElements),S(g.id,d.priorityInElements),A(g.id,d.linkedSelects),t.forEach(M=>{M.src=g.icon.src,M.alt=g.icon.alt}))}),C(e),e.value===o[0].id&&(T(e.value,d.showInElements),v(e.value,d.hideInElements),S(e.value,d.priorityInElements))});let f=o.length;if(e.options.length===f){let u=new Event("marketSelectReady");e.dispatchEvent(u)}else new MutationObserver((y,x)=>{if(e.options.length===o.length){x.disconnect();let g=new Event("marketSelectReady");e.dispatchEvent(g)}}).observe(e,{childList:!0})};var F=()=>{N(),q()};var R=()=>{document.querySelectorAll("select").forEach(n=>{let{mirrorValue:o}=n.dataset;if(!o)return;let a=document.querySelector(`[data-mirror-target="${o}"]`);n.addEventListener("change",i=>{var p;let{value:m}=i.target;m===""&&(m=(p=i.target.dataset.mirrorDefault)!=null?p:""),a.textContent=m,setTimeout(()=>{window.scrollBy(0,1),window.scrollBy(0,-1)},200)})});let s=document.querySelector('select[name="Leadership"]'),r=document.querySelectorAll('.w-dyn-item [fs-cmsfilter-field="market"]'),t=[];r.forEach(n=>{n.textContent&&t.push(n.textContent)}),new Set(t.sort()).forEach(n=>{let o=new Option(n,n);s&&s.add(o)}),L("script",document.head,{src:"https://cdn.jsdelivr.net/npm/@finsweet/attributes-cmsfilter@1/cmsfilter.js",async:!0})};var W=()=>{console.log("jobs"),window.fsAttributes=window.fsAttributes||[],window.fsAttributes.push(["cmsfilter",async l=>{let[n]=l,{listInstance:o}=n,[a]=o.items,i=a.element,m=await e();o.clearItems();let p=m.map(d=>s(d,i));await o.addItems(p);let h=n.form.querySelectorAll('[data-element="filter-list"]');for(let d of h){let f=d.querySelector('[data-element="filter"]');if(!f)return;let u=f.parentElement;if(!u)return;f.remove();let{property:y}=d.dataset;if(!y)return;let x=r(m,y);for(let g of x){let M=t(g,f);M&&u.append(M)}}n.storeFiltersData()}]);let e=async()=>{let l={emea:{api:"groupmemea_jobfeedapi_key",sc:"a1d19b3f3a21cdde1558794436300152",subsidiaryName:"Acceleration"},northAmerica:{api:"groupmnorthamerica_jobfeedapi_key",sc:"60497c5c1cfa4d58341ec4060be40b2f",subsidiaryName:"GroupM%20Nexus%20Acceleration"}},n=[];Object.values(l).forEach(a=>{n.push(`https://api.jobvite.com/api/v2/job?api=${a.api}&sc=${a.sc}&subsidiaryName=${a.subsidiaryName}`)});let o=n.map(a=>fetch(a));return Promise.all(o).then(a=>Promise.all(a.map(i=>i.json()))).then(a=>a.reduce((m,p)=>m.concat(p.requisitions),[])).catch(a=>{console.error(a)})},s=(l,n)=>{let o=n.cloneNode(!0),a=o.querySelector('[data-job="title"]'),i=o.querySelector('[data-job="description"]'),m=o.querySelector('[data-job="country"]'),p=o.querySelector('[data-job="department"]'),h=o.querySelector('[data-job="apply"]');return a&&(a.textContent=l.title),i&&(i.textContent=l.briefDescription),m&&(m.textContent=l.location),p&&(p.textContent=l.category),h&&(h.href=l.detailLink),o},r=(l,n)=>{let o=new Set;for(let a of l)o.add(a[n]);return[...o]},t=(l,n)=>{let o=n.cloneNode(!0),a=o.querySelector("span"),i=o.querySelector("input");if(!(!a||!i))return a.textContent=l,i.value=l,o}};var w=(e,s)=>(Array.isArray(s)||(s=[s]),s.map(t=>e.dispatchEvent(new Event(t,{bubbles:!0}))).every(t=>t));var _=()=>{console.log("modals");let e=[...document.querySelectorAll("[data-modal-button]")],s=[...document.querySelectorAll("[data-modal-trigger]")];[...document.querySelectorAll(".splide__arrows")].forEach(n=>{n.addEventListener("click",()=>{e=[...document.querySelectorAll("[data-modal-button]")],t()})});let t=()=>{e.forEach(n=>{n.removeEventListener("click",l),n.addEventListener("click",l)})},l=n=>{let a=n.currentTarget.dataset.modalButton,i=s.find(m=>m.dataset.modalTrigger===a);w(i,"click")};t()};var B=()=>{W(),_()};var O=()=>{console.log("resources");let e=document.querySelector('[fs-cmsfilter-element="filters"]');[...e==null?void 0:e.querySelectorAll("input")].forEach(t=>{let l=t.dataset.inputName,n=l.toLowerCase().replace(/\s+/g,"-");t.name=l,t.id=n,t.nextElementSibling.setAttribute("for",t.id)}),[...document.querySelectorAll('[data-filter="dropdown"]')].forEach(t=>{let l=t.querySelector('[data-filter-toggle="text"]'),n=t.querySelector('[data-filter-toggle="select"]'),o=t.querySelector('[data-filter-toggle="selected"]'),a=t.querySelector('[data-filter-toggle="additional"]'),i=[l,n,o,a];[...t.querySelectorAll("input")].forEach(p=>{p.addEventListener("change",h=>{i.forEach(u=>u.style.display="none");let f=[...t.querySelectorAll("input:checked")].map(u=>u.dataset.inputName);console.log(f),f.length===0?l.style.display="block":f.length===1?(o.textContent=f[0],o.style.display="inline"):f.length>1&&(o.textContent=`${f[0]},\xA0`,o.style.display="inline",a.textContent=`+${f.length-1}`,a.style.display="inline")})})})};var $=()=>{let e=0;L("script",document.head,{src:"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js",defer:!0,callback:t}),L("script",document.head,{src:"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js",defer:!0,callback:t});let s=document.querySelector('[data-sticky="vertical-center"]'),r=`${(window.innerHeight-s.offsetHeight)/2}px`;s.style.top=r;function t(){if(e+=1,e!==2)return;gsap.registerPlugin(ScrollTrigger);let l=document.querySelector(".capabilities_header"),n=[...document.querySelectorAll(".capabilities_list-item")],o=[...document.querySelectorAll(".capabilities_illustration")];gsap.matchMedia().add("(min-width: 768px)",()=>{n.forEach((i,m)=>{let p=gsap.timeline({scrollTrigger:{trigger:i,start:"top 50%",end:"bottom 50%",scrub:1}}),h=o.find(d=>d.classList.contains(`is-${m+1}`));p.to(h,{opacity:1,duration:1})})})}};var J=()=>{let{pathname:e}=window.location;switch(e){case"/about-us":R();break;case"/services":$();break;case"/resources":O();break;case"/careers":B();break}};window.Webflow||(window.Webflow=[]);window.Webflow.push(()=>{console.log("index"),F(),J(),document.querySelector(".splide")&&H(),document.querySelector("[data-copy-url]")&&k()});})();
